(window.webpackJsonp=window.webpackJsonp||[]).push([[665],{367:function(s,a,n){"use strict";n.r(a);var e=n(2),t=Object(e.a)({},function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"wangeditor"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#wangeditor","aria-hidden":"true"}},[s._v("#")]),s._v(" wangEditor")]),s._v(" "),n("p",[s._v("轻量级 web 富文本编辑器，配置方便，使用简单。支持 IE10+ 浏览器。")]),s._v(" "),n("ul",[n("li",[s._v("官网：http://www.wangEditor.com")]),s._v(" "),n("li",[s._v("文档：http://www.kancloud.cn/wangfupeng/wangeditor3/332599")]),s._v(" "),n("li",[s._v("源码：http://github.com/wangfupeng1988/wangEditor")])]),s._v(" "),n("h2",{attrs:{id:"什么是富文本编辑器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#什么是富文本编辑器","aria-hidden":"true"}},[s._v("#")]),s._v(" 什么是富文本编辑器")]),s._v(" "),n("p",[s._v("富文本编辑器，Rich Text Editor, 简称 RTE, 它提供类似于 Microsoft Word 的编辑功能，容易被不会编写 HTML 的用户并需要设置各种文本格式的用户所喜爱。它的应用也越来越广泛。最先只有 IE 浏览器支持，其它浏览器相继跟进，在功能的丰富性来说，还是 IE 强些。虽然没有一个统一的标准，但对于最基本的功能，各浏览器提供的 API 基本一致，从而使编写一个跨浏览器的富文本编辑器成为可能。")]),s._v(" "),n("h2",{attrs:{id:"页面引入"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#页面引入","aria-hidden":"true"}},[s._v("#")]),s._v(" 页面引入")]),s._v(" "),n("p",[s._v("CSS 部分")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<link rel="stylesheet" href="/static/assets/plugins/wangEditor/wangEditor.min.css" />\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("JS 部分")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<script src="/static/assets/plugins/wangEditor/wangEditor.min.js"><\/script>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"启用-wangeditor"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启用-wangeditor","aria-hidden":"true"}},[s._v("#")]),s._v(" 启用 wangEditor")]),s._v(" "),n("p",[s._v("只需要一个 "),n("code",[s._v("div")]),s._v(" 元素，用 JavaScript 代码启用即可")]),s._v(" "),n("p",[s._v("HTML 结构如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<div id="editor"></div>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("JavaScript 启用代码如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("var E = window.wangEditor;\nvar editor = new E('#editor');\neditor.create();\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"效果演示"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#效果演示","aria-hidden":"true"}},[s._v("#")]),s._v(" 效果演示")]),s._v(" "),n("p",[s._v("配置完成后，在浏览器端显示如下：")]),s._v(" "),n("p",[n("img",{attrs:{src:"/funtl/assets/Lusifer1530124826.png",alt:""}})]),s._v(" "),n("h3",{attrs:{id:"服务端支持"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#服务端支持","aria-hidden":"true"}},[s._v("#")]),s._v(" 服务端支持")]),s._v(" "),n("p",[s._v("配置方式同 "),n("router-link",{attrs:{to:"/2018/06/27/appose/Dropzone-图片上传插件/#服务端支持"}},[s._v("Dropzone 图片上传插件")])],1),s._v(" "),n("h3",{attrs:{id:"控制器关键代码参考"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#控制器关键代码参考","aria-hidden":"true"}},[s._v("#")]),s._v(" 控制器关键代码参考")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('package com.funtl.my.shop.web.admin.web.controller;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.ResponseBody;\nimport org.springframework.web.multipart.MultipartFile;\n\nimport javax.servlet.http.HttpServletRequest;\nimport java.io.File;\nimport java.io.IOException;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.UUID;\n\n/**\n * 文件上传控制器\n * <p>Title: UploadController</p>\n * <p>Description: </p>\n *\n * @author Lusifer\n * @version 1.0.0\n * @date 2018/6/27 14:32\n */\n@Controller\npublic class UploadController {\n\n    private static final String UPLOAD_PATH = "/static/upload/";\n\n    /**\n     * 文件上传\n     *\n     * @return\n     */\n    @ResponseBody\n    @RequestMapping(value = "upload", method = RequestMethod.POST)\n    public Map<String, Object> upload(MultipartFile editorFile, HttpServletRequest request) {\n        Map<String, Object> result = new HashMap<>();\n\n        // 获取文件后缀\n        String fileName = editorFile.getOriginalFilename();\n        String fileSuffix = fileName.substring(fileName.lastIndexOf("."));\n\n        // 文件存放路径\n        String filePath = request.getSession().getServletContext().getRealPath(UPLOAD_PATH);\n\n        // 判断路径是否存在，不存在则创建文件夹\n        File file = new File(filePath);\n        if (!file.exists()) {\n            file.mkdir();\n        }\n\n        // 将文件写入目标\n        file = new File(filePath, UUID.randomUUID() + fileSuffix);\n        try {\n            editorFile.transferTo(file);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n        // 获取服务端路径\n        String serverPath = String.format("%s://%s:%s%s%s", request.getScheme(), request.getServerName(), request.getServerPort(), request.getContextPath(), UPLOAD_PATH);\n        \n        // 返回给 wangEditor 的数据格式\n        result.put("errno", 0);\n        result.put("data", new String[]{serverPath + file.getName()});\n        return result;\n    }\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br")])]),n("p",[s._v("相比 "),n("code",[s._v("Dropzone 图片上传插件")]),s._v(" 一节，控制器代码的主要差别在于接口返回的数据格式，官方要求的格式如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('{\n    // errno 即错误代码，0 表示没有错误。\n    //       如果有错误，errno != 0，可通过下文中的监听函数 fail 拿到该错误码进行自定义处理\n    "errno": 0,\n\n    // data 是一个数组，返回若干图片的线上地址\n    "data": [\n        "图片1地址",\n        "图片2地址",\n        "……"\n    ]\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])])])},[],!1,null,null,null);a.default=t.exports}}]);