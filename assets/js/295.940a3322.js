(window.webpackJsonp=window.webpackJsonp||[]).push([[295],{833:function(e,t,i){"use strict";i.r(t);var l=i(2),s=Object(l.a)({},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[i("h1",{attrs:{id:"limit-20000-加载很慢怎么解决"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#limit-20000-加载很慢怎么解决","aria-hidden":"true"}},[e._v("#")]),e._v(" limit 20000 加载很慢怎么解决")]),e._v(" "),i("p",[e._v("MySQL 的性能低是因为数据库要去扫描 "),i("code",[e._v("N + M")]),e._v(" 条记录，然后又要放弃之前 "),i("code",[e._v("N")]),e._v(" 条记录，开销很大")]),e._v(" "),i("p",[e._v("解决思路：")]),e._v(" "),i("ul",[i("li",[e._v("前端加缓存，或者其他方式，减少落到库的查询操作，例如某些系统中数据在搜索引擎中有备份的，可以用 es 等进行搜索")]),e._v(" "),i("li",[e._v("使用延迟关联，即先通用 limit 得到需要数据的索引字段，然后再通过原表和索引字段关联获得需要数据")])]),e._v(" "),i("div",{staticClass:"language- line-numbers-mode"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[e._v("select a.* from a,(select id from table_1 where is_deleted='N' limit 100000,20) b where a.id = b.id\n")])]),e._v(" "),i("div",{staticClass:"line-numbers-wrapper"},[i("span",{staticClass:"line-number"},[e._v("1")]),i("br")])]),i("ul",[i("li",[e._v("从业务上实现，不分页如此多，例如只能分页前 100 页，后面的不允许再查了")]),e._v(" "),i("li",[e._v("不使用 limit N,M, 而是使用 limit N，即将 offset 转化为 where 条件。")])])])},[],!1,null,null,null);t.default=s.exports}}]);